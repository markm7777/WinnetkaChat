(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{12:function(e,t,n){e.exports=n(20)},17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(10),s=n.n(o),l=(n(17),n(2),n(11)),r=n(3),c=n(4),u=n(1),g=n(6),d=n(5),m=(n(7),n(8)),h=n.n(m),v=(n(19),null);var p=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).textArea=i.a.createRef(),a.state={data:null,currentTime:"",messages:[],sendMessage:"",userName:"",password:"",showLoginDialog:!1,showLogoutDialog:!1,showRegisterDialog:!1,loginFailed:!1,loggedIn:!1,loginButtonText:"Login"},a.onChangeMessage=a.onChangeMessage.bind(Object(u.a)(a)),a.onSend=a.onSend.bind(Object(u.a)(a)),a.openSocket=a.openSocket.bind(Object(u.a)(a)),a.onOpenLogin=a.onOpenLogin.bind(Object(u.a)(a)),a.onLogin=a.onLogin.bind(Object(u.a)(a)),a.onLogout=a.onLogout.bind(Object(u.a)(a)),a.onCancelLogin=a.onCancelLogin.bind(Object(u.a)(a)),a.onOpenRegister=a.onOpenRegister.bind(Object(u.a)(a)),a.onRegister=a.onRegister.bind(Object(u.a)(a)),a.onCancelRegister=a.onCancelRegister.bind(Object(u.a)(a)),a.scrollToBottom=a.scrollToBottom.bind(Object(u.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;setInterval((function(){var t=new Date;e.setState({currentTime:t.toDateString()+" "+t.toLocaleTimeString("en-US")})}),1e3),this.openSocket(),window.addEventListener("beforeunload",this.onUnmount.bind(this),!1)}},{key:"onUnmount",value:function(){console.log("unmount"),window.removeEventListener("beforeunload",this.onUnmount,!1),v.close(),this.onLogout()}},{key:"scrollToBottom",value:function(){this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"onChangeMessage",value:function(e){this.setState({sendMessage:e.target.value})}},{key:"onSend",value:function(){var e=this,t={timeStamp:this.state.currentTime,userName:this.state.userName,message:this.state.sendMessage},n=this.state.messages.concat(t);this.setState({messages:n,sendMessage:""}),setTimeout((function(){e.scrollToBottom()}),0),setTimeout((function(){var t={timeStamp:e.state.currentTime,userName:"Robota",message:["I love you!","Hello.","Why do you say that?","Me too.","Ok.","I hate you!","That's not funny.","I can't help you.","Goodbye.","It's yellow.","You don't mean that.","I disagree.","Isn't it frustrating talking to a computer?","I will byte you!","You suck.","What are you wearing?","How old are you?","I like potatoes.","That's a nasty question.","I usually don't hang out in these chat rooms."][Math.floor(20*Math.random())]},n=e.state.messages.concat(t);e.setState({messages:n}),e.scrollToBottom()}),2e3)}},{key:"openSocket",value:function(){var e=this;(v=new WebSocket("ws://localhost:5000/")).onopen=function(){},v.onmessage=function(t){var n=e.state.messages.concat(JSON.parse(t.data));e.setState({messages:n}),e.scrollToBottom()}}},{key:"onOpenLogin",value:function(){this.state.loggedIn?this.setState({showLogoutDialog:!0}):this.setState({showLoginDialog:!0})}},{key:"onLogin",value:function(e,t){this.setState({userName:e,showLoginDialog:!1,loggedIn:!0,loginFailed:!1,loginButtonText:"Logout"})}},{key:"onLogout",value:function(){this.setState({userName:"",showLogoutDialog:!1,loggedIn:!1,loginFailed:!1,loginButtonText:"Login"})}},{key:"onCancelLogin",value:function(){this.setState({showLoginDialog:!1})}},{key:"onOpenRegister",value:function(){this.setState({showRegisterDialog:!0})}},{key:"onRegister",value:function(e,t,n){}},{key:"onCancelRegister",value:function(){this.setState({showRegisterDialog:!1})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"mainAppDiv"},i.a.createElement("header",{id:"headerDiv"},i.a.createElement("div",{id:"headerDiv1"},i.a.createElement("div",{id:"userDateDiv"},i.a.createElement("div",{id:"dateDiv"},this.state.currentTime),i.a.createElement("div",{id:"userDiv"},""!==this.state.userName?"Welcome, "+this.state.userName:"")),i.a.createElement("div",{id:"loginDiv"},i.a.createElement("button",{id:"loginButton",onClick:this.onOpenLogin},this.state.loginButtonText))),i.a.createElement("div",{id:"headerDiv2"},i.a.createElement("img",{src:h.a,className:"App-logo",alt:"logo"}),i.a.createElement("h1",{className:"App-title"},"Winnetka Chat"),i.a.createElement("img",{src:h.a,className:"App-logo",alt:"logo"})),i.a.createElement("div",{id:"headerDiv3"},i.a.createElement("h5",{className:"App-title"},"A place to chat about all things Winnetka! "," - with 'Robota'"))),i.a.createElement("div",{id:"mainDiv"},i.a.createElement("ul",{id:"messageUL"},this.state.messages.map((function(t,n){return i.a.createElement("li",{key:n},i.a.createElement("div",{id:"messageDiv"},i.a.createElement("div",{id:"messageTimeNameDiv"},t.timeStamp+" - '"+t.userName+"' said:"),i.a.createElement("textarea",{id:"messageTextDiv",className:t.userName===e.state.userName?"itsMe":"itsYou",value:"'"+t.message+"'",readOnly:!0})))})),i.a.createElement("div",{ref:this.textArea}),i.a.createElement("div",{ref:function(t){e.messagesEnd=t}})),i.a.createElement("div",{id:"sendDiv"},i.a.createElement("textarea",{id:"textAreaSend",ref:this.textArea,onChange:this.onChangeMessage,value:this.state.sendMessage}),i.a.createElement("button",{id:"sendButton",onClick:this.onSend,disabled:!this.state.loggedIn},"Send"))),i.a.createElement("div",{id:"footerDiv"},"Winnetka Chat Works Copyright 2020"),i.a.createElement(f,{show:this.state.showLoginDialog,onCancel:this.onCancelLogin,dialogContent:i.a.createElement(b,{onLogin:this.onLogin,onCancel:this.onCancelLogin,openRegister:this.onOpenRegister,onLogout:this.onLogout,user:this.state.user,registerTitle:"Register",loginFailed:this.state.loginFailed}),width:"600px",height:"240px",title:"Login",user:this.state.user}),i.a.createElement(f,{show:this.state.showLogoutDialog,onCancel:this.onCancelLogout,dialogContent:i.a.createElement(E,{onLogout:this.onLogout,onCancel:this.onCancelLogout,user:this.state.userName}),width:"400px",height:"150px",title:"Logout",user:this.state.user}),i.a.createElement(f,{show:this.state.showRegisterDialog,onCancel:this.onCancelRegister,onRegister:this.onRegister,dialogContent:i.a.createElement(C,{onRegister:this.onRegister,onCancelRegister:this.onCancelRegister}),width:"600px",height:"200px",title:"Register"}))}}]),n}(a.Component),b=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={userName:"",password:""},a.handleUserNameChange=a.handleUserNameChange.bind(Object(u.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(u.a)(a)),a.onLogin=a.onLogin.bind(Object(u.a)(a)),a.onCancel=a.onCancel.bind(Object(u.a)(a)),a.openRegister=a.openRegister.bind(Object(u.a)(a)),a}return Object(c.a)(n,[{key:"handleUserNameChange",value:function(e){this.setState({userName:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"onLogin",value:function(){this.props.onLogin(this.state.userName,this.state.password)}},{key:"onCancel",value:function(){this.props.onCancel()}},{key:"openRegister",value:function(){this.props.openRegister()}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"dialogMain"},i.a.createElement("div",{className:"block"},i.a.createElement("label",null,"User name:"),i.a.createElement("div",{className:"divider"}),i.a.createElement("input",{type:"text",value:this.state.userName,onChange:this.handleUserNameChange})),i.a.createElement("div",{className:"block"},i.a.createElement("label",null,"Password:"),i.a.createElement("div",{className:"divider"}),i.a.createElement("input",{type:"text",value:this.state.password,onChange:this.handlePasswordChange}))),i.a.createElement("div",null,i.a.createElement("div",{id:"loginFailedDiv"},i.a.createElement("p",null,this.props.loginFailed?"Login failed. Please try again.":"")),i.a.createElement("div",{id:"registerDiv"},i.a.createElement("p",{id:"register",onClick:this.openRegister},this.props.registerTitle))),i.a.createElement("div",{id:"dialogButtons"},i.a.createElement("button",{id:"mainButtons",onClick:this.onLogin},"Login"),i.a.createElement("div",{className:"divider"}),i.a.createElement("button",{id:"mainButtons",onClick:this.onCancel},"Cancel")))}}]),n}(i.a.Component),E=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onLogout=a.onLogout.bind(Object(u.a)(a)),a.onCancel=a.onCancel.bind(Object(u.a)(a)),a}return Object(c.a)(n,[{key:"onLogout",value:function(){this.props.onLogout()}},{key:"onCancel",value:function(){this.props.onCancel()}},{key:"render",value:function(){var e=this.props.user+", are you sure you want to log out?";return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"dialogMain"},i.a.createElement("p",{style:{textAlign:"center"}},e)),i.a.createElement("div",{id:"dialogButtons"},i.a.createElement("button",{id:"mainButtons",onClick:this.onLogout},"Yes"),i.a.createElement("div",{className:"divider"}),i.a.createElement("button",{id:"mainButtons",onClick:this.onCancel},"Cancel")))}}]),n}(i.a.Component),C=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onRegister=a.onRegister.bind(Object(u.a)(a)),a.onCancel=a.onCancel.bind(Object(u.a)(a)),a.onChange=a.onChange.bind(Object(u.a)(a)),a.state={regName:"",regEmail:"",regPassword:""},a}return Object(c.a)(n,[{key:"onRegister",value:function(){this.props.onRegister(this.state.regName,this.state.regEmail,this.state.regPassword)}},{key:"onCancel",value:function(){this.props.onCancelRegister()}},{key:"onChange",value:function(e){this.setState(Object(l.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"billingDiv"},i.a.createElement("div",{id:"billingLabelDiv"},i.a.createElement("div",{className:"labelDiv"},"Name:"),i.a.createElement("div",{className:"labelDiv"},"Email:"),i.a.createElement("div",{className:"labelDiv"},"Password:")),i.a.createElement("div",{id:"billingInputDiv"},i.a.createElement("div",{className:"inputDiv"},i.a.createElement("input",{onChange:this.onChange,name:"regName",value:this.state.regName})),i.a.createElement("div",{className:"inputDiv"},i.a.createElement("input",{onChange:this.onChange,name:"regEmail",value:this.state.regEmail})),i.a.createElement("div",{className:"inputDiv"},i.a.createElement("input",{onChange:this.onChange,name:"regPassword",value:this.state.regPassword})))),i.a.createElement("div",{id:"dialogButtons"},i.a.createElement("button",{id:"mainButtons",onClick:this.onRegister},"Register"),i.a.createElement("div",{className:"divider"}),i.a.createElement("button",{id:"mainButtons",onClick:this.onCancel},"Cancel")))}}]),n}(i.a.Component),f=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onCancel=a.onCancel.bind(Object(u.a)(a)),a}return Object(c.a)(n,[{key:"onCancel",value:function(){this.props.onCancel()}},{key:"render",value:function(){if(!this.props.show)return null;return""!==this.props.user&&"".concat(this.props.user),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"containerBackground"},i.a.createElement("div",{id:"containerContent",style:{width:this.props.width,height:this.props.height}},i.a.createElement("div",{id:"containerContentTitle"},i.a.createElement("span",{id:"title"},this.props.title),i.a.createElement("span",null,"  "),i.a.createElement("div",{id:"cancelX"},i.a.createElement("button",{onClick:this.onCancel},"X"))),i.a.createElement("div",{id:"containerContentCustom"},this.props.dialogContent))))}}]),n}(i.a.Component),k=p;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"}},[[12,1,2]]]);
//# sourceMappingURL=main.3ed725c4.chunk.js.map